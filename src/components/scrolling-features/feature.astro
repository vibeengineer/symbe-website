---
import type { ScrollingFeatureStoryblok } from "@storyblok/types";
import { parseAsset } from "@/services/storyblok/utils/parse-asset";
import type { Prettify } from "@/types";
import { storyblokEditable, type SbBlokData } from "@storyblok/astro";
import Heading from "@/components/ui/heading.astro";
import BodyText from "@/components/ui/body-text.astro";
import Media from "@/components/ui/media.astro";

type Props = {
  blok: Prettify<ScrollingFeatureStoryblok>;
  index: number;
};

const {
  blok: { title, description, media },
  index,
} = Astro.props;

const parsedMedia = parseAsset(media);
---

<div
  class="flex w-full flex-col gap-6"
  data-media-asset={JSON.stringify(parsedMedia)}
  data-scrolling-feature={index}
  {...storyblokEditable(Astro.props.blok as SbBlokData)}
>
  <div class="mb-8 md:hidden">
    <Media
      data-desktop-media-asset
      asset={media}
      class="mx-auto h-auto max-h-[300px] w-full object-contain"
    />
  </div>

  <div class="max-w-xl">
    <Heading level="l" class="text-text-900 mb-6">
      {title}
    </Heading>

    <BodyText size="l" class="text-text-500">
      {description}
    </BodyText>
  </div>
</div>
