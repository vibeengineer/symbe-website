---
import type { LinkStoryblok } from "@storyblok/types";
import { parseLink } from "@/services/storyblok/utils/parse-link";
import type { Prettify } from "@/types";
import { storyblokEditable, type SbBlokData } from "@storyblok/astro";
import { cva, type VariantProps } from "class-variance-authority";
import { cn } from "@/utils/cn";

export const linkVariants = cva(
  "font-sans font-medium rounded-md transition-colors duration-200 ease-in-out",
  {
    variants: {
      style: {
        primary: "bg-accent-electric text-text-000 px-6 py-3 hover:bg-blue-700",
        ghost: "hover:text-text-200 hover:bg-gray-200/10",
        default: "hover:underline",
      },
    },
    defaultVariants: {
      style: "default",
    },
  },
);

export type LinkVariants = VariantProps<typeof linkVariants>;

export type Props = {
  blok: Prettify<LinkStoryblok>;
  className?: string;
};

const {
  blok: { link, linkText, linkStyle = "default" },
  className,
} = Astro.props;
---

<a
  href={parseLink(link, "href")}
  target={parseLink(link, "target")}
  class={cn(linkVariants({ style: linkStyle }), className)}
  {...storyblokEditable(Astro.props.blok as SbBlokData)}
>
  {linkText}
</a>
